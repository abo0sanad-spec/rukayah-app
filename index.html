<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>مدرسة رقية الإسلامية — قيمنا تصنع الأثر</title>
  <link rel="stylesheet" href="styles.css">
  <script defer src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script defer src="app.js"></script>
</head>
<body>
  <header class="app-header">
    <div class="brand">
      <img src="assets/logo.png" alt="شعار مدرسة رقية الإسلامية" class="logo"/>
      <div class="titles">
        <h1>مدرسة رقية الاسلمية</h1>
        <p class="tagline">مبادرة: قيمنا تصنع الأثر</p>
        <p class="coordinator">المنسقة: أ. وفاء الزومان</p>
      </div>
    </div>
  </header>

  <main class="container">
    <section class="initiative-info">
      <p>
        تطبيق قيمنا تصنع الأثر من نشاط قيمنا حياة في مدرسة متوسطة رقية الإسلامية، نسعى لغرس القيم الإيجابية وتحويلها إلى سلوكٍ واقعي ملموس. سجّلي موقفك أو مبادرتك الجميلة، وكوني من صانعات الأثر اللواتي يتركن بصمة خير في مدرستنا ومجتمعنا.
      </p>
    </section>

    <section class="role-switch">
      <button class="tab-btn active" data-tab="student">طالبة</button>
      <button class="tab-btn" data-tab="teacher">معلمة</button>
      <button class="tab-btn" data-tab="coordinator">منسقة</button>
    </section>

    <section class="session-bar">
      <span id="whoami">غير مسجَّلة دخول</span>
      <button id="logoutBtn" class="secondary">خروج</button>
    </section>

    <!-- طالبة -->
    <section id="student" class="tab active">
      <div class="card">
        <h2>دخول الطالبة بالرمز</h2>
        <div class="row">
          <input id="studentToken" type="text" placeholder="أدخلي الرمز أو امسحي QR" />
          <button id="claimTokenBtn">دخول</button>
        </div>
      </div>

      <div class="card">
        <h2>إضافة مبادرة</h2>
        <div class="form-grid">
          <input id="title" type="text" placeholder="العنوان" />
          <textarea id="description" rows="3" placeholder="وصف المبادرة"></textarea>
          <label>القيمة
            <select id="valueCategory">
              <option value="الانضباط">الانضباط</option>
              <option value="التعاون">التعاون</option>
              <option value="الأمانة">الأمانة</option>
              <option value="العزيمة">العزيمة</option>
            </select>
          </label>
          <label>معامل الأثر (<span id="impactVal">1.0</span>)
            <input id="impactFactor" type="range" min="1.0" max="1.3" step="0.05" value="1.0"/>
          </label>
          <label class="checkbox">
            <input id="hasEvidence" type="checkbox"/> يوجد توثيق
          </label>
          <button id="submitInitiativeBtn">إرسال</button>
        </div>
      </div>

      <div class="card">
        <h2>مبادراتي</h2>
        <table id="myInitiatives">
          <thead>
            <tr><th>التاريخ</th><th>العنوان</th><th>الحالة</th><th>النقاط</th></tr>
          </thead>
          <tbody></tbody>
        </table>
        <button id="exportMyCsv" class="secondary">تصدير CSV</button>
      </div>
    </section>

    <!-- معلمة / منسقة -->
    <section id="teacher" class="tab">
      <div class="card">
        <h2>دخول المعلمة</h2>
        <div class="row">
          <input id="teacherEmail" type="email" placeholder="البريد الإلكتروني المدرسي" />
          <button id="sendOtpBtn">إرسال رابط الدخول</button>
        </div>
      </div>

      <div class="card">
        <h2>مراجعة المبادرات (قيد الانتظار)</h2>
        <table id="pendingTable">
          <thead>
            <tr><th>الطالبة</th><th>الصف</th><th>القيمة</th><th>العنوان</th><th>وصف</th><th>تاريخ</th><th>إجراء</th></tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>
    <section id="coordinator" class="tab">
      <section id="honorBoardSection" class="hb-card">
  <header class="hb-header">
    <h2>قائمة الطالبات المتميزات</h2>
    <p class="hb-sub">هذه القائمة إحصائية مبنية على مجموع النقاط المعتمدة.</p>
  </header>

  <div class="hb-table-wrap">
    <table class="hb-table" dir="rtl">
      <thead>
        <tr>
          <th>اسم الطالبة</th>
          <th>الصف</th>
          <th>عدد المبادرات</th>
          <th>مجموع النقاط</th>
        </tr>
      </thead>
      <tbody id="honorBoardBody">
        <!-- يُملأ من الجافاسكربت -->
      </tbody>
    </table>
  </div>
  <footer class="hb-footer">
    <button id="exportHonorCsv" type="button" class="hb-btn">تصدير CSV</button>
  </footer>
</section>
      <div class="card">
        <h2>تقرير شهري حسب القيم</h2>
        <table id="monthlyReport">
          <thead>
            <tr><th>الشهر</th><th>القيمة</th><th>عدد المبادرات</th><th>مجموع النقاط</th></tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
      <div class="card">
        <button id="exportSchoolCsv">تصدير CSV — تقرير المدرسة</button>
      </div>
    </section>
  </main>
  <footer class="app-footer">
    <small>&copy;  مدرسة رقية الاسلمية - مديرة المدرسة: أ.أمل المهوس</small>
  </footer>
</body>
</html>
